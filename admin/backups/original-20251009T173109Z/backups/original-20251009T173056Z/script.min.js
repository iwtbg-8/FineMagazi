function loadCommonNav(e){const t=document.getElementById("nav-placeholder");if(!t)return;const n=["nav.html","../nav.html","/nav.html"];let o=0;(function e(){if(o>=n.length)return console.error("loadCommonNav: failed to load nav.html from any candidate path:",n),Promise.reject(new Error("Failed to load nav.html"));const t=n[o++];return fetch(t).then(t=>t.ok?t.text():e()).catch(()=>e())})().then(n=>{if(!n)return;const o=window.location.pathname,a=o.split("/").filter(Boolean);a.length&&"/"!==o[o.length-1]&&a.pop();let l="";for(let e=0;e<a.length;e++)l+="../";const d=document.createElement("div");d.innerHTML=n;d.querySelectorAll("a[href]").forEach(e=>{const t=e.getAttribute("href");t&&(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("/")||t.startsWith("#")||e.setAttribute("href",l+t))}),t.innerHTML=d.innerHTML,"function"==typeof e&&e()}).catch(e=>{console.error("loadCommonNav: unable to load nav.html",e)})}let nav=null;const menuBtn=document.createElement("button");function updateMenuBtnColor(e){menuBtn.style.color=e?"#eee":"#111"}function handleResize(){nav&&(window.innerWidth<=768?(menuBtn.style.display="block",nav.style.display="none"):(menuBtn.style.display="none",nav.style.display="flex",nav.style.flexDirection="row",nav.style.gap="1.5rem"))}menuBtn.innerText="â˜°",menuBtn.id="menu-btn",menuBtn.style.fontSize="1.5rem",menuBtn.style.background="none",menuBtn.style.border="none",menuBtn.style.cursor="pointer",menuBtn.style.display="none",menuBtn.style.color="var(--text-dark)",document.querySelector("header").appendChild(menuBtn),menuBtn.addEventListener("click",()=>{nav&&("none"===nav.style.display||""===nav.style.display?(nav.style.display="flex",nav.style.flexDirection="column",nav.style.gap="1rem"):nav.style.display="none")}),window.addEventListener("DOMContentLoaded",()=>{loadCommonNav(()=>{nav=document.querySelector("#nav-placeholder nav"),handleResize()})}),window.addEventListener("resize",handleResize);const backToTop=document.createElement("button");backToTop.innerText="â†‘ Top",backToTop.id="back-to-top",backToTop.style.position="fixed",backToTop.style.bottom="20px",backToTop.style.right="20px",backToTop.style.padding="10px 15px",backToTop.style.fontSize="1rem",backToTop.style.background="#0077cc",backToTop.style.color="#fff",backToTop.style.border="none",backToTop.style.borderRadius="5px",backToTop.style.cursor="pointer",backToTop.style.display="none",document.body.appendChild(backToTop),window.addEventListener("scroll",()=>{window.scrollY>300?backToTop.style.display="block":backToTop.style.display="none"}),backToTop.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const darkModeBtn=document.getElementById("dark-mode"),body=document.body,localStorageKey="themePreference";function applyTheme(e){e?(body.classList.add("dark"),darkModeBtn.textContent="â˜€ï¸ Light Mode"):(body.classList.remove("dark"),darkModeBtn.textContent="ðŸŒ™ Dark Mode"),updateMenuBtnColor(e);try{window.dispatchEvent(new Event("theme-change"))}catch(e){}}window.addEventListener("load",()=>{handleResize();const e=localStorage.getItem(localStorageKey);let t=!1;"dark"===e?t=!0:null===e&&window.matchMedia&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches),applyTheme(t)}),darkModeBtn.addEventListener("click",()=>{const e=!body.classList.contains("dark");applyTheme(e);const t=e?"dark":"light";localStorage.setItem(localStorageKey,t)});