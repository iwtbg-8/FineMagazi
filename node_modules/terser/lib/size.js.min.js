import{AST_Accessor,AST_Array,AST_Arrow,AST_Await,AST_BigInt,AST_Binary,AST_Block,AST_Break,AST_Call,AST_Case,AST_Class,AST_ClassStaticBlock,AST_ClassPrivateProperty,AST_ClassProperty,AST_ConciseMethod,AST_Conditional,AST_Const,AST_Continue,AST_Debugger,AST_Default,AST_Defun,AST_Destructuring,AST_Directive,AST_Do,AST_Dot,AST_DotHash,AST_EmptyStatement,AST_Expansion,AST_Export,AST_False,AST_For,AST_ForIn,AST_Function,AST_Hole,AST_If,AST_Import,AST_ImportMeta,AST_Infinity,AST_LabeledStatement,AST_Let,AST_NameMapping,AST_NaN,AST_New,AST_NewTarget,AST_Node,AST_Null,AST_Number,AST_Object,AST_ObjectKeyVal,AST_ObjectGetter,AST_ObjectSetter,AST_PrivateGetter,AST_PrivateMethod,AST_PrivateSetter,AST_PrivateIn,AST_RegExp,AST_Return,AST_Sequence,AST_String,AST_Sub,AST_Super,AST_Switch,AST_Symbol,AST_SymbolClassProperty,AST_SymbolExportForeign,AST_SymbolImportForeign,AST_SymbolRef,AST_SymbolDeclaration,AST_TemplateSegment,AST_TemplateString,AST_This,AST_Throw,AST_Toplevel,AST_True,AST_Try,AST_Catch,AST_Finally,AST_Unary,AST_Undefined,AST_Using,AST_Var,AST_VarDefLike,AST_While,AST_With,AST_Yield,walk_parent}from"./ast.js";import{first_in_statement}from"./utils/first_in_statement.js";let mangle_options;AST_Node.prototype.size=function(t,e){mangle_options=t&&t._mangle_options;let o=0;return walk_parent(this,(t,e)=>{if(o+=t._size(e),t instanceof AST_Arrow&&t.is_braceless())return o+=t.body[0].value._size(e),!0},e||t&&t.stack),mangle_options=void 0,o},AST_Node.prototype._size=()=>0,AST_Debugger.prototype._size=()=>8,AST_Directive.prototype._size=function(){return 2+this.value.length};const list_overhead=t=>t.length&&t.length-1;AST_Block.prototype._size=function(){return 2+list_overhead(this.body)},AST_Toplevel.prototype._size=function(){return list_overhead(this.body)},AST_EmptyStatement.prototype._size=()=>1,AST_LabeledStatement.prototype._size=()=>2,AST_Do.prototype._size=()=>9,AST_While.prototype._size=()=>7,AST_For.prototype._size=()=>8,AST_ForIn.prototype._size=()=>8,AST_With.prototype._size=()=>6,AST_Expansion.prototype._size=()=>3;const lambda_modifiers=t=>(t.is_generator?1:0)+(t.async?6:0);AST_Accessor.prototype._size=function(){return lambda_modifiers(this)+4+list_overhead(this.argnames)+list_overhead(this.body)},AST_Function.prototype._size=function(t){return 2*!!first_in_statement(t)+lambda_modifiers(this)+12+list_overhead(this.argnames)+list_overhead(this.body)},AST_Defun.prototype._size=function(){return lambda_modifiers(this)+13+list_overhead(this.argnames)+list_overhead(this.body)},AST_Arrow.prototype._size=function(){let t=2+list_overhead(this.argnames);1===this.argnames.length&&this.argnames[0]instanceof AST_Symbol||(t+=2);const e=this.is_braceless()?0:list_overhead(this.body)+2;return lambda_modifiers(this)+t+e},AST_Destructuring.prototype._size=()=>2,AST_TemplateString.prototype._size=function(){return 2+3*Math.floor(this.segments.length/2)},AST_TemplateSegment.prototype._size=function(){return this.value.length},AST_Return.prototype._size=function(){return this.value?7:6},AST_Throw.prototype._size=()=>6,AST_Break.prototype._size=function(){return this.label?6:5},AST_Continue.prototype._size=function(){return this.label?9:8},AST_If.prototype._size=()=>4,AST_Switch.prototype._size=function(){return 8+list_overhead(this.body)},AST_Case.prototype._size=function(){return 5+list_overhead(this.body)},AST_Default.prototype._size=function(){return 8+list_overhead(this.body)},AST_Try.prototype._size=()=>3,AST_Catch.prototype._size=function(){let t=7+list_overhead(this.body);return this.argname&&(t+=2),t},AST_Finally.prototype._size=function(){return 7+list_overhead(this.body)},AST_Var.prototype._size=function(){return 4+list_overhead(this.definitions)},AST_Let.prototype._size=function(){return 4+list_overhead(this.definitions)},AST_Const.prototype._size=function(){return 6+list_overhead(this.definitions)},AST_Using.prototype._size=function(){return(this.await?6:0)+6+list_overhead(this.definitions)},AST_VarDefLike.prototype._size=function(){return this.value?1:0},AST_NameMapping.prototype._size=function(){return this.name?4:0},AST_Import.prototype._size=function(){let t=6;return this.imported_name&&(t+=1),(this.imported_name||this.imported_names)&&(t+=5),this.imported_names&&(t+=2+list_overhead(this.imported_names)),t},AST_ImportMeta.prototype._size=()=>11,AST_Export.prototype._size=function(){let t=7+(this.is_default?8:0);return this.exported_value&&(t+=this.exported_value._size()),this.exported_names&&(t+=2+list_overhead(this.exported_names)),this.module_name&&(t+=5),t},AST_Call.prototype._size=function(){return this.optional?4+list_overhead(this.args):2+list_overhead(this.args)},AST_New.prototype._size=function(){return 6+list_overhead(this.args)},AST_Sequence.prototype._size=function(){return list_overhead(this.expressions)},AST_Dot.prototype._size=function(){return this.optional?this.property.length+2:this.property.length+1},AST_DotHash.prototype._size=function(){return this.optional?this.property.length+3:this.property.length+2},AST_Sub.prototype._size=function(){return this.optional?4:2},AST_Unary.prototype._size=function(){return"typeof"===this.operator?7:"void"===this.operator?5:this.operator.length},AST_Binary.prototype._size=function(t){if("in"===this.operator)return 4;let e=this.operator.length;return("+"===this.operator||"-"===this.operator)&&this.right instanceof AST_Unary&&this.right.operator===this.operator&&(e+=1),this.needs_parens(t)&&(e+=2),e},AST_Conditional.prototype._size=()=>3,AST_Array.prototype._size=function(){return 2+list_overhead(this.elements)},AST_Object.prototype._size=function(t){let e=2;return first_in_statement(t)&&(e+=2),e+list_overhead(this.properties)};const key_size=t=>"string"==typeof t?t.length:0;AST_ObjectKeyVal.prototype._size=function(){return key_size(this.key)+1};const static_size=t=>t?7:0;AST_ObjectGetter.prototype._size=function(){return 5+static_size(this.static)+key_size(this.key)},AST_ObjectSetter.prototype._size=function(){return 5+static_size(this.static)+key_size(this.key)},AST_ConciseMethod.prototype._size=function(){return static_size(this.static)+key_size(this.key)},AST_PrivateMethod.prototype._size=function(){return AST_ConciseMethod.prototype._size.call(this)+1},AST_PrivateGetter.prototype._size=function(){return AST_ConciseMethod.prototype._size.call(this)+4},AST_PrivateSetter.prototype._size=function(){return AST_ConciseMethod.prototype._size.call(this)+4},AST_PrivateIn.prototype._size=function(){return 5},AST_Class.prototype._size=function(){return(this.name?8:7)+(this.extends?8:0)},AST_ClassStaticBlock.prototype._size=function(){return 8+list_overhead(this.body)},AST_ClassProperty.prototype._size=function(){return static_size(this.static)+("string"==typeof this.key?this.key.length+2:0)+(this.value?1:0)},AST_ClassPrivateProperty.prototype._size=function(){return AST_ClassProperty.prototype._size.call(this)+1},AST_Symbol.prototype._size=function(){return mangle_options&&this.thedef&&!this.thedef.unmangleable(mangle_options)?1:this.name.length},AST_SymbolClassProperty.prototype._size=function(){return this.name.length},AST_SymbolRef.prototype._size=AST_SymbolDeclaration.prototype._size=function(){return"arguments"===this.name?9:AST_Symbol.prototype._size.call(this)},AST_NewTarget.prototype._size=()=>10,AST_SymbolImportForeign.prototype._size=function(){return this.name.length},AST_SymbolExportForeign.prototype._size=function(){return this.name.length},AST_This.prototype._size=()=>4,AST_Super.prototype._size=()=>5,AST_String.prototype._size=function(){return this.value.length+2},AST_Number.prototype._size=function(){const{value:t}=this;return 0===t?1:t>0&&Math.floor(t)===t?Math.floor(Math.log10(t)+1):t.toString().length},AST_BigInt.prototype._size=function(){return this.value.length},AST_RegExp.prototype._size=function(){return this.value.toString().length},AST_Null.prototype._size=()=>4,AST_NaN.prototype._size=()=>3,AST_Undefined.prototype._size=()=>6,AST_Hole.prototype._size=()=>0,AST_Infinity.prototype._size=()=>8,AST_True.prototype._size=()=>4,AST_False.prototype._size=()=>5,AST_Await.prototype._size=()=>6,AST_Yield.prototype._size=()=>6;