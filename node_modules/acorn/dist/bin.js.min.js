"use strict";var path=require("path"),fs=require("fs"),acorn=require("./acorn.js");function _interopNamespaceDefault(e){var a=Object.create(null);return e&&Object.keys(e).forEach(function(t){if("default"!==t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(a,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}}),a.default=e,Object.freeze(a)}var acorn__namespace=_interopNamespaceDefault(acorn),inputFilePaths=[],forceFileName=!1,fileMode=!1,silent=!1,compact=!1,tokenize=!1,options={};function help(e){var a=0===e?console.log:console.error;a("usage: "+path.basename(process.argv[1])+" [--ecma3|--ecma5|--ecma6|--ecma7|--ecma8|--ecma9|...|--ecma2015|--ecma2016|--ecma2017|--ecma2018|...]"),a("        [--tokenize] [--locations] [--allow-hash-bang] [--allow-await-outside-function] [--compact] [--silent] [--module] [--help] [--] [<infile>...]"),process.exit(e)}for(var i=2;i<process.argv.length;++i){var arg=process.argv[i];if("-"!==arg[0]||"-"===arg)inputFilePaths.push(arg);else{if("--"===arg){inputFilePaths.push.apply(inputFilePaths,process.argv.slice(i+1)),forceFileName=!0;break}if("--locations"===arg)options.locations=!0;else if("--allow-hash-bang"===arg)options.allowHashBang=!0;else if("--allow-await-outside-function"===arg)options.allowAwaitOutsideFunction=!0;else if("--silent"===arg)silent=!0;else if("--compact"===arg)compact=!0;else if("--help"===arg)help(0);else if("--tokenize"===arg)tokenize=!0;else if("--module"===arg)options.sourceType="module";else{var match=arg.match(/^--ecma(\d+)$/);match?options.ecmaVersion=+match[1]:help(1)}}}function run(e){var a=[],t=0;try{e.forEach(function(e,o){if(t=o,tokenize){var n,i=acorn__namespace.tokenizer(e,options);do{n=i.getToken(),a.push(n)}while(n.type!==acorn__namespace.tokTypes.eof)}else a=acorn__namespace.parse(e,options),options.program=a})}catch(e){console.error(fileMode?e.message.replace(/\(\d+:\d+\)$/,function(e){return e.slice(0,1)+inputFilePaths[t]+" "+e.slice(1)}):e.message),process.exit(1)}silent||console.log(JSON.stringify(a,function(e,a){return"bigint"==typeof a?null:a},compact?null:2))}if(fileMode=inputFilePaths.length&&(forceFileName||!inputFilePaths.includes("-")||1!==inputFilePaths.length))run(inputFilePaths.map(function(e){return fs.readFileSync(e,"utf8")}));else{var code="";process.stdin.resume(),process.stdin.on("data",function(e){return code+=e}),process.stdin.on("end",function(){return run([code])})}