import{keyword as resolveKeyword}from"css-tree";import{hasNoChildren}from"./utils.js";export default function cleanAtrule(e,r,t){if(e.block&&(null!==this.stylesheet&&(this.stylesheet.firstAtrulesAllowed=!1),hasNoChildren(e.block)))t.remove(r);else switch(e.name){case"charset":if(hasNoChildren(e.prelude))return void t.remove(r);if(r.prev)return void t.remove(r);break;case"import":if(null===this.stylesheet||!this.stylesheet.firstAtrulesAllowed)return void t.remove(r);t.prevUntil(r.prev,function(e){if("Atrule"!==e.type||"import"!==e.name&&"charset"!==e.name)return this.root.firstAtrulesAllowed=!1,t.remove(r),!0},this);break;default:{const s=resolveKeyword(e.name).basename;"keyframes"!==s&&"media"!==s&&"supports"!==s||(hasNoChildren(e.prelude)||hasNoChildren(e.block))&&t.remove(r)}}}