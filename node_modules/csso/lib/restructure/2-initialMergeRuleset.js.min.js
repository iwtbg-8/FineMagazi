import{walk}from"css-tree";import{unsafeToSkipNode,isEqualSelectors,isEqualDeclarations,addSelectors,hasSimilarSelectors}from"./utils.js";function processRule(e,r,i){const l=e.prelude.children,t=e.block.children;i.prevUntil(r.prev,function(o){if("Rule"!==o.type)return unsafeToSkipNode.call(l,o);const s=o.prelude.children,n=o.block.children;if(e.pseudoSignature===o.pseudoSignature){if(isEqualSelectors(s,l))return n.appendList(t),i.remove(r),!0;if(isEqualDeclarations(t,n))return addSelectors(s,l),i.remove(r),!0}return hasSimilarSelectors(l,s)})}export default function initialMergeRule(e){walk(e,{visit:"Rule",enter:processRule})}