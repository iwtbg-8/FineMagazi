const{hasOwnProperty:hasOwnProperty}=Object.prototype;function buildMap(r,s){const t=Object.create(null);if(!Array.isArray(r))return null;for(let e of r)s&&(e=e.toLowerCase()),t[e]=!0;return t}function buildList(r){if(!r)return null;const s=buildMap(r.tags,!0),t=buildMap(r.ids),e=buildMap(r.classes);return null===s&&null===t&&null===e?null:{tags:s,ids:t,classes:e}}export function buildIndex(r){let s=!1;if(r.scopes&&Array.isArray(r.scopes)){s=Object.create(null);for(let t=0;t<r.scopes.length;t++){const e=r.scopes[t];if(!e||!Array.isArray(e))throw new Error("Wrong usage format");for(const r of e){if(hasOwnProperty.call(s,r))throw new Error(`Class can't be used for several scopes: ${r}`);s[r]=t+1}}}return{whitelist:buildList(r),blacklist:buildList(r.blacklist),scopes:s}}