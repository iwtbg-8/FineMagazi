import{isHexDigit,isWhiteSpace,isValidEscape,consumeEscaped,decodeEscaped}from"../tokenizer/index.js";const REVERSE_SOLIDUS=92,QUOTATION_MARK=34,APOSTROPHE=39;export function decode(e){const t=e.length,c=e.charCodeAt(0),o=34===c||39===c?1:0,s=1===o&&t>1&&e.charCodeAt(t-1)===c?t-2:t-1;let i="";for(let c=o;c<=s;c++){let o=e.charCodeAt(c);if(92===o){if(c===s){c!==t-1&&(i=e.substr(c+1));break}if(o=e.charCodeAt(++c),isValidEscape(92,o)){const t=c-1,o=consumeEscaped(e,t);c=o-1,i+=decodeEscaped(e.substring(t+1,o))}else 13===o&&10===e.charCodeAt(c+1)&&c++}else i+=e[c]}return i}export function encode(e,t){const c=t?"'":'"',o=t?39:34;let s="",i=!1;for(let t=0;t<e.length;t++){const c=e.charCodeAt(t);0!==c?c<=31||127===c?(s+="\\"+c.toString(16),i=!0):c===o||92===c?(s+="\\"+e.charAt(t),i=!1):(i&&(isHexDigit(c)||isWhiteSpace(c))&&(s+=" "),s+=e.charAt(t),i=!1):s+="ï¿½"}return c+s+c}