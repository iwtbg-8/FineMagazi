import{isName,isValidEscape,consumeEscaped,decodeEscaped}from"../tokenizer/index.js";const REVERSE_SOLIDUS=92;export function decode(e){const t=e.length-1;let c="";for(let o=0;o<e.length;o++){let r=e.charCodeAt(o);if(92===r){if(o===t)break;if(r=e.charCodeAt(++o),isValidEscape(92,r)){const t=o-1,r=consumeEscaped(e,t);o=r-1,c+=decodeEscaped(e.substring(t+1,r))}else 13===r&&10===e.charCodeAt(o+1)&&o++}else c+=e[o]}return c}export function encode(e){let t="";if(1===e.length&&45===e.charCodeAt(0))return"\\-";for(let c=0;c<e.length;c++){const o=e.charCodeAt(c);0!==o?o<=31||127===o||o>=48&&o<=57&&(0===c||1===c&&45===e.charCodeAt(0))?t+="\\"+o.toString(16)+" ":isName(o)?t+=e.charAt(c):t+="\\"+e.charAt(c):t+="ï¿½"}return t}