function noop(e){return e}function generateMultiplier(e){const{min:n,max:t,comma:r}=e;return 0===n&&0===t?r?"#?":"*":0===n&&1===t?"?":1===n&&0===t?r?"#":"+":1===n&&1===t?"":(r?"#":"")+(n===t?"{"+n+"}":"{"+n+","+(0!==t?t:"")+"}")}function generateTypeOpts(e){if("Range"===e.type)return" ["+(null===e.min?"-∞":e.min)+","+(null===e.max?"∞":e.max)+"]";throw new Error("Unknown node type `"+e.type+"`")}function generateSequence(e,n,t,r){const a=" "===e.combinator||r?e.combinator:" "+e.combinator+" ",o=e.terms.map(e=>internalGenerate(e,n,t,r)).join(a);return e.explicit||t?(r||","===o[0]?"[":"[ ")+o+(r?"]":" ]"):o}function internalGenerate(e,n,t,r){let a;switch(e.type){case"Group":a=generateSequence(e,n,t,r)+(e.disallowEmpty?"!":"");break;case"Multiplier":return internalGenerate(e.term,n,t,r)+n(generateMultiplier(e),e);case"Type":a="<"+e.name+(e.opts?n(generateTypeOpts(e.opts),e.opts):"")+">";break;case"Property":a="<'"+e.name+"'>";break;case"Keyword":a=e.name;break;case"AtKeyword":a="@"+e.name;break;case"Function":a=e.name+"(";break;case"String":case"Token":a=e.value;break;case"Comma":a=",";break;default:throw new Error("Unknown node type `"+e.type+"`")}return n(a,e)}export function generate(e,n){let t=noop,r=!1,a=!1;return"function"==typeof n?t=n:n&&(r=Boolean(n.forceBraces),a=Boolean(n.compact),"function"==typeof n.decorate&&(t=n.decorate)),internalGenerate(e,t,r,a)}