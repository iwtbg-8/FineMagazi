function loadCommonNav(e){const t=document.getElementById("nav-placeholder");if(!t)return;const n=["nav.html","../nav.html","/nav.html"];let o=0;(function e(){if(o>=n.length)return console.error("loadCommonNav: failed to load nav.html from any candidate path:",n),Promise.reject(new Error("Failed to load nav.html"));const t=n[o++];return fetch(t).then(t=>t.ok?t.text():e()).catch(()=>e())})().then(n=>{if(!n)return;const o=window.location.pathname,a=o.split("/").filter(Boolean);a.length&&"/"!==o[o.length-1]&&a.pop();let r="";for(let e=0;e<a.length;e++)r+="../";const l=document.createElement("div");l.innerHTML=n;l.querySelectorAll("a[href]").forEach(e=>{const t=e.getAttribute("href");t&&(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("/")||t.startsWith("#")||e.setAttribute("href",r+t))}),t.innerHTML=l.innerHTML,"function"==typeof e&&e()}).catch(e=>{console.error("loadCommonNav: unable to load nav.html",e)})}function loadCommonFooter(){const e=document.getElementById("footer-placeholder");if(!e)return;const t=["footer.html","../footer.html","/footer.html"];let n=0;(function e(){if(n>=t.length)return console.error("loadCommonFooter: failed to load footer.html from any candidate path:",t),Promise.reject(new Error("Failed to load footer.html"));const o=t[n++];return fetch(o).then(t=>t.ok?t.text():e()).catch(()=>e())})().then(t=>{if(!t)return;const n=window.location.pathname,o=n.split("/").filter(Boolean);o.length&&"/"!==n[n.length-1]&&o.pop();let a="";for(let e=0;e<o.length;e++)a+="../";const r=document.createElement("div");r.innerHTML=t;r.querySelectorAll("a[href]").forEach(e=>{const t=e.getAttribute("href");t&&t.startsWith("/")&&!t.startsWith("//")?e.setAttribute("href",a.slice(0,-1)+t):!t||t.startsWith("http")||t.startsWith("//")||t.startsWith("#")||e.setAttribute("href",a+t)}),e.innerHTML=r.innerHTML}).catch(t=>{console.error("Failed to load footer:",t),e.innerHTML='\n        <footer class="footer">\n          <div class="container">\n            <p>&copy; 2025 FineMagazi. All rights reserved. | <a href="/privacy-policy.html">Privacy Policy</a> | <a href="/About-Us.html">About Us</a></p>\n          </div>\n        </footer>\n      '})}let nav=null;const menuBtn=document.createElement("button");menuBtn.innerText="☰",menuBtn.id="menu-btn",menuBtn.style.fontSize="1.5rem",menuBtn.style.background="none",menuBtn.style.border="none",menuBtn.style.cursor="pointer",menuBtn.style.display="none",menuBtn.style.color="var(--text-dark)",menuBtn.className="menu-btn";const headerEl=document.querySelector("header");function updateMenuBtnColor(e){menuBtn.style.color=e?"#eee":"#111"}function handleResize(){nav&&(window.innerWidth<=768?(menuBtn.style.display="block",nav.style.display="none",nav.classList.remove("mobile-nav-open")):(menuBtn.style.display="none",nav.style.display="flex",nav.style.flexDirection="row",nav.style.gap="1.5rem",nav.style.position="static",nav.style.background="none",nav.style.border="none",nav.style.boxShadow="none",nav.style.padding="0",nav.classList.remove("mobile-nav-open")))}headerEl&&headerEl.appendChild(menuBtn),menuBtn.addEventListener("click",()=>{nav&&(nav.classList.contains("mobile-nav-open")?(nav.classList.remove("mobile-nav-open"),nav.style.display="none",menuBtn.innerHTML="☰"):(nav.classList.add("mobile-nav-open"),nav.style.display="flex",nav.style.flexDirection="column",nav.style.gap="1rem",menuBtn.innerHTML="×"))}),document.addEventListener("click",e=>{nav&&window.innerWidth<=768&&nav.classList.contains("mobile-nav-open")&&!nav.contains(e.target)&&!menuBtn.contains(e.target)&&(nav.classList.remove("mobile-nav-open"),nav.style.display="none",menuBtn.innerHTML="☰")}),window.addEventListener("DOMContentLoaded",()=>{loadCommonNav(()=>{nav=document.querySelector("#nav-placeholder nav"),nav&&handleResize()}),loadCommonFooter()}),window.addEventListener("resize",handleResize);const backToTop=document.createElement("button");backToTop.innerText="↑ Top",backToTop.id="back-to-top",backToTop.style.position="fixed",backToTop.style.bottom="20px",backToTop.style.right="20px",backToTop.style.padding="10px 15px",backToTop.style.fontSize="1rem",backToTop.style.background="#0077cc",backToTop.style.color="#fff",backToTop.style.border="none",backToTop.style.borderRadius="5px",backToTop.style.cursor="pointer",backToTop.style.display="none",document.body.appendChild(backToTop),window.addEventListener("scroll",()=>{window.scrollY>300?backToTop.style.display="block":backToTop.style.display="none"}),backToTop.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const darkModeBtn=document.getElementById("dark-mode"),body=document.body,localStorageKey="themePreference";function applyTheme(e){e?(body.classList.add("dark"),darkModeBtn&&(darkModeBtn.textContent="☀️ Light Mode")):(body.classList.remove("dark"),darkModeBtn&&(darkModeBtn.textContent="🌙 Dark Mode")),updateMenuBtnColor(e),backToTop.style.background=e?"#66aaff":"#0077cc";try{window.dispatchEvent(new Event("theme-change"))}catch(e){}}function initializeTheme(){const e=localStorage.getItem(localStorageKey);let t=!1;"dark"===e?t=!0:null===e&&window.matchMedia&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches),applyTheme(t)}window.addEventListener("DOMContentLoaded",()=>{initializeTheme()}),window.addEventListener("load",()=>{handleResize(),initializeTheme()}),darkModeBtn&&darkModeBtn.addEventListener("click",()=>{const e=!body.classList.contains("dark");applyTheme(e);const t=e?"dark":"light";localStorage.setItem(localStorageKey,t)}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>console.log("SW registered:",e.scope)).catch(e=>console.warn("SW registration failed:",e))});