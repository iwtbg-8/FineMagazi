const CACHE_VERSION="v1",CACHE_NAME="finemagazi-v1",PRECACHE_URLS=["/","/index.html","/style.css","/script.js","/head-loader.js","/img/F.jpg"];function isNavigationRequest(e){return"navigate"===e.mode||"GET"===e.method&&e.headers.get("accept")&&e.headers.get("accept").includes("text/html")}self.addEventListener("install",e=>{e.waitUntil(caches.open(CACHE_NAME).then(e=>e.addAll(PRECACHE_URLS)).then(()=>self.skipWaiting()))}),self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(e=>Promise.all(e.filter(e=>e!==CACHE_NAME).map(e=>caches.delete(e)))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{const t=e.request;new URL(t.url).origin===location.origin&&(isNavigationRequest(t)?e.respondWith(fetch(t).then(e=>(caches.open(CACHE_NAME).then(n=>n.put(t,e.clone())),e)).catch(()=>caches.match(t).then(e=>e||caches.match("/index.html")))):e.respondWith(caches.match(t).then(e=>{const n=fetch(t).then(e=>(e&&200===e.status&&caches.open(CACHE_NAME).then(n=>n.put(t,e.clone())),e)).catch(()=>null);return e||n})))}),self.addEventListener("message",e=>{e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting()});